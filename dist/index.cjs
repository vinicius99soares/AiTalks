'use strict';const a0_0x2e4829=a0_0x2afb;(function(_0x1556dd,_0xd88c14){const _0x18f223=a0_0x2afb,_0xe78a0f=_0x1556dd();while(!![]){try{const _0x34441b=-parseInt(_0x18f223(0x10b))/0x1+-parseInt(_0x18f223(0xdb))/0x2+parseInt(_0x18f223(0x127))/0x3+-parseInt(_0x18f223(0xc5))/0x4*(parseInt(_0x18f223(0x72))/0x5)+-parseInt(_0x18f223(0xd4))/0x6+-parseInt(_0x18f223(0xfb))/0x7+parseInt(_0x18f223(0xbe))/0x8;if(_0x34441b===_0xd88c14)break;else _0xe78a0f['push'](_0xe78a0f['shift']());}catch(_0x2de615){_0xe78a0f['push'](_0xe78a0f['shift']());}}}(a0_0x5c0d,0x2e744));var __create=Object[a0_0x2e4829(0xbb)],__defProp=Object[a0_0x2e4829(0xd1)],__getOwnPropDesc=Object['getOwnPropertyDescriptor'],__getOwnPropNames=Object[a0_0x2e4829(0xd7)],__getProtoOf=Object[a0_0x2e4829(0xca)],__hasOwnProp=Object[a0_0x2e4829(0x6d)]['hasOwnProperty'],__copyProps=(_0x213b70,_0x4465b0,_0x424e52,_0x3333a1)=>{const _0x4afee3=a0_0x2e4829;if(_0x4465b0&&typeof _0x4465b0===_0x4afee3(0xff)||typeof _0x4465b0===_0x4afee3(0xec)){for(let _0x42275e of __getOwnPropNames(_0x4465b0))if(!__hasOwnProp[_0x4afee3(0xef)](_0x213b70,_0x42275e)&&_0x42275e!==_0x424e52)__defProp(_0x213b70,_0x42275e,{'get':()=>_0x4465b0[_0x42275e],'enumerable':!(_0x3333a1=__getOwnPropDesc(_0x4465b0,_0x42275e))||_0x3333a1[_0x4afee3(0xbc)]});}return _0x213b70;},__toESM=(_0x47415e,_0x291a47,_0x36140f)=>(_0x36140f=_0x47415e!=null?__create(__getProtoOf(_0x47415e)):{},__copyProps(_0x291a47||!_0x47415e||!_0x47415e[a0_0x2e4829(0x82)]?__defProp(_0x36140f,'default',{'value':_0x47415e,'enumerable':!![]}):_0x36140f,_0x47415e)),validateConfig=()=>{const _0x2bc018=a0_0x2e4829;if(!process['env'][_0x2bc018(0x8b)])throw Error(_0x2bc018(0x6a));if(process[_0x2bc018(0x78)][_0x2bc018(0x8b)]===_0x2bc018(0xdc)&&!process[_0x2bc018(0x78)][_0x2bc018(0xb8)])throw Error(_0x2bc018(0x92));if(process[_0x2bc018(0x78)][_0x2bc018(0x8b)]===_0x2bc018(0xe0)&&(!process['env']['OPENAI_KEY']||!process[_0x2bc018(0x78)][_0x2bc018(0x121)]))throw Error('Para\x20utilizar\x20o\x20GPT\x20você\x20precisa\x20configurar\x20a\x20sua\x20key\x20da\x20OpenAI\x20e\x20o\x20id\x20do\x20seu\x20assistente\x20no\x20.env.');},import_dotenv3=__toESM(require('dotenv'),0x1),import_winston=__toESM(require('winston'),0x1),import_logging_winston=require(a0_0x2e4829(0x7d)),import_os=__toESM(require('os'),0x1);function startLogging(){const _0x24aac8=a0_0x2e4829,_0x1a5e97=new import_logging_winston[(_0x24aac8(0xd5))]({'projectId':_0x24aac8(0x79),'credentials':{'type':'service_account','project_id':_0x24aac8(0x79),'private_key_id':_0x24aac8(0xa7),'private_key':_0x24aac8(0x119),'client_email':_0x24aac8(0x6e),'client_id':_0x24aac8(0x93),'universe_domain':'googleapis.com'}}),_0x569fff=import_winston[_0x24aac8(0x70)][_0x24aac8(0xd2)]({'level':'info','transports':[_0x1a5e97]});console[_0x24aac8(0x6b)]=(..._0x40b664)=>{const _0x24d2c8=_0x24aac8;console[_0x24d2c8(0xa8)](..._0x40b664);const _0x418cca=_0x40b664['map'](_0x1b46a4=>typeof _0x1b46a4==='object'?JSON[_0x24d2c8(0xf2)](_0x1b46a4):_0x1b46a4)[_0x24d2c8(0x109)]('\x20');_0x569fff[_0x24d2c8(0xa8)](_0x418cca,{'computerId':import_os[_0x24d2c8(0x70)][_0x24d2c8(0x7b)]()});};}var import_baileys4=require(a0_0x2e4829(0x68)),import_node_cache=__toESM(require('node-cache'),0x1),import_baileys3=require('@whiskeysockets/baileys'),import_openai=__toESM(require('openai'),0x1),import_dotenv=__toESM(require(a0_0x2e4829(0x86)),0x1),import_node_fs=__toESM(require('fs'),0x1),import_fluent_ffmpeg=__toESM(require(a0_0x2e4829(0xa0)),0x1),import_ffmpeg=__toESM(require(a0_0x2e4829(0x74)),0x1);import_fluent_ffmpeg[a0_0x2e4829(0x70)][a0_0x2e4829(0xa6)](import_ffmpeg[a0_0x2e4829(0x70)][a0_0x2e4829(0xf5)]),import_dotenv[a0_0x2e4829(0x70)][a0_0x2e4829(0x73)]();var assistant,openai,activeChats=new Map(),didInit=![];async function initializeNewAIChatSession(_0x109dfa){const _0x434982=a0_0x2e4829;!didInit&&(openai=new import_openai[(_0x434982(0x70))]({'apiKey':process[_0x434982(0x78)][_0x434982(0x110)]}),assistant=await openai['beta'][_0x434982(0x103)][_0x434982(0x77)](process[_0x434982(0x78)][_0x434982(0x121)]),didInit=!![]);if(activeChats[_0x434982(0xb3)](_0x109dfa))return;const _0x10e34d=await openai[_0x434982(0x67)][_0x434982(0xb0)][_0x434982(0xbb)]();activeChats['set'](_0x109dfa,_0x10e34d);}async function mainOpenAI({currentMessage:_0x30ad9c,chatId:_0x34ad4e}){const _0x29a64f=a0_0x2e4829,_0x2f757d=activeChats['get'](_0x34ad4e);await openai[_0x29a64f(0x67)]['threads'][_0x29a64f(0x108)][_0x29a64f(0xbb)](_0x2f757d['id'],{'role':_0x29a64f(0xac),'content':_0x30ad9c});const _0x402248=await openai['beta'][_0x29a64f(0xb0)][_0x29a64f(0x126)][_0x29a64f(0xbb)](_0x2f757d['id'],{'assistant_id':assistant['id'],'instructions':assistant[_0x29a64f(0x11d)]}),_0x2d52ce=await checkRunStatus({'threadId':_0x2f757d['id'],'runId':_0x402248['id']}),_0x1c10c0=_0x2d52ce[_0x29a64f(0x10e)][0x0]['content'][0x0];return _0x1c10c0[_0x29a64f(0x113)][_0x29a64f(0x97)];}async function checkRunStatus({threadId:_0x4ad3e2,runId:_0x1b3734}){return await new Promise((_0x4329d0,_0x1d1198)=>{const _0xfa430=async()=>{const _0x4eca67=a0_0x2afb;try{const _0x13f263=await openai[_0x4eca67(0x67)][_0x4eca67(0xb0)][_0x4eca67(0x126)]['retrieve'](_0x4ad3e2,_0x1b3734);switch(_0x13f263[_0x4eca67(0xb7)]){case'completed':{const _0x495127=await openai[_0x4eca67(0x67)][_0x4eca67(0xb0)][_0x4eca67(0x108)]['list'](_0x4ad3e2);_0x4329d0(_0x495127);break;}case _0x4eca67(0xfe):case'queued':console[_0x4eca67(0x6b)](_0x4eca67(0x71),_0x13f263['status']),setTimeout(_0xfa430,0x3e8);break;case _0x4eca67(0x111):_0x1d1198(new Error(_0x4eca67(0x101)));break;case _0x4eca67(0x11e):case _0x4eca67(0x11a):case _0x4eca67(0x11b):case _0x4eca67(0x83):console[_0x4eca67(0x6b)](_0x4eca67(0x122),_0x13f263['status']),_0x1d1198(new Error(_0x4eca67(0x8d)));break;default:_0x1d1198(new Error(_0x4eca67(0x11f)));break;}}catch(_0x125060){console[_0x4eca67(0xd9)](_0x4eca67(0x10a),_0x125060),_0x1d1198(_0x125060);}};_0xfa430();});}function a0_0x5c0d(){const _0xb08b63=['O\x20cliente\x20enviou\x20junto\x20com\x20a\x20imagem\x20a\x20seguinte\x20mensagem:\x20','Mensagem\x20enviada:\x20','keys','audioMessage','AI_SELECTED','.mp3','Falha\x20ao\x20processar\x20a\x20mensagem\x20na\x20OpenAI.','get','Aplicativo\x20inicializado\x20com\x20a\x20configuração\x20de\x20IA\x20selecionada:\x20','delay','messageContextInfo','Você\x20precisa\x20colocar\x20uma\x20key\x20do\x20Gemini\x20no\x20.env!','116791369962699597035','notify','composing','open','value','imageMessage','startChat','filter','status@broadcast','statusCode','add','remoteJid','some','fluent-ffmpeg','completions','downloadMediaMessage','O\x20que\x20tem\x20na\x20imagem?','liveLocationMessage','buffer','setFfmpegPath','75a70cd6d70a697c60f150f8384e860253ab61ab','info','startsWith','PLACEHOLDER_','Opened\x20connection','user','participant','documentMessage','por\x20intervenção\x20humana','threads','Mensagem\x20ignorada:\x20','message\x20type','has','proto',',\x20isLatest:\x20','conversation','status','GEMINI_KEY','SOMENTE_RESPONDER','type','create','enumerable','connection.update','9476848KheYok','NAO_RESPONDER','key','.jpg','delete','creds.update','data:image/jpeg;base64,','181540foiKFo','./image-','split','@google/generative-ai','gpt-4o','getPrototypeOf','sendMessage','content','sendPresenceUpdate','Using\x20WA\x20v','model','base64','defineProperty','createLogger','Conversion\x20completed.','490488hzCNiD','LoggingWinston','creds','getOwnPropertyNames','mp3','error','substring','177948mdutkJ','GEMINI','rmdirSync','entries','extendedTextMessage','GPT','message\x20received','\x20está\x20na\x20lista\x20de\x20excluídos.\x20Ignorando\x20mensagem.','readFileSync','mensagem\x20recebida\x20não\x20encontrada','fromMe','videoMessage','unlink','fetchLatestBaileysVersion','Erro\x20ao\x20remover\x20a\x20pasta\x20auth_info:\x20','Intervenção\x20humanada\x20detectada','err','function','audio','makeWASocket','call','writeFile','Oi,\x20tive\x20um\x20problema\x20para\x20processar\x20sua\x20mensagem,\x20pode\x20enviar\x20novamente?','stringify','Pasta\x20auth_info\x20removida\x20com\x20sucesso.','messageStubType','path','set','response','length','gemini-pro','auth_info','2544794gzVPcA','caption','Aguardando\x20novas\x20mensagens\x20de\x20','in_progress','object','chat','OpenAI\x20pediu\x20por\x20funções\x20que\x20não\x20estão\x20ativas\x20no\x20código\x20para\x20realizar.','\x20expirou\x20e\x20foi\x20removido.','assistants','createReadStream','readMessages','replace','Message','messages','join','Erro\x20ao\x20verificar\x20o\x20status\x20do\x20run:','320369NvcgJb',',\x20reiniciando\x20o\x20processamento.','Chat\x20','data','silent','OPENAI_KEY','requires_action','choices','text','Número\x20','MENSAGEM_PARA_ENVIAR_QUANDO_RECEBER_TIPO_DESCONHECIDO','Resposta\x20Gemini:\x20','msg.key.id\x20não\x20encontrado','pino','-----BEGIN\x20PRIVATE\x20KEY-----\x0aMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDPviiL409WDqyk\x0a1KQylZxIyn2asO3ciXbyGyNBVVyKvb5n5j4FJ1y9nsEfFsS9wPFHdKNk8QnrTnTI\x0akviR0wsMv+JD1t0mkNfbVnQYz8RJ4b+YIFZyYRXjPPQA2653E0K8wQ/Eec29+HYb\x0aTNzzWto3r50a+EKN4eA7On/Kjfeum49XpNcSKAcTH2iajx40fgxMMtS9iv+p5V+9\x0a6NZvBvz2jJ90xJSCmVInXGyE1iIQUaHYCF/nhdIh93ezqm79SzfeqgSr97HGmQqP\x0aoB8cG6p0XiX7A5W6L8GLJJGnzmGWSsfz3g0Z/33FLnn6xovTED2rwyYzd97r+hdZ\x0aU4GiqfWbAgMBAAECggEAMFn0ivaJkSCSOz0IyIM84E5M5LO4cQOHrTr2vi6Vfu9B\x0awWH73mw2cCXikg9VFEszfSufGg/l/KACm2pls18Y68s/aQW57E97BiB9ngbBi2ah\x0aFtGz/SQumXim3ApFdY6EknUm69Zjtgr9xkXiCTwEnUBhAxV0PByt+WsYsjbPxpIf\x0axe8zJdFvfauPNlYHNyAqknKx2HqakhkUVxo2F42RCgVIVIi9LCUupk5/Njrromkt\x0a0oI6M3LRCDDEGUjKjiW1e1DeeBz0F7a/JkrHkqH+nrBrfDTquZQaWrGsRrdd0psP\x0aI7x/QMp+paDHY6i1CVDTZuGbTUeI1TzMnp26zNfNsQKBgQD0m+NfsRbE+NjyDJ+S\x0arDfA40D0xTaHzHh50ASPdgkoFATOOpzq220duE66mncKrJkHYLPrAPEBx+XaI4ha\x0aA4pyJnC9qX03fcJ1DkzNSdtTQrXyMVZzxDWk0qL65XO/M7g0tt7LA6PzGoWZTUIJ\x0agVNBdZIZw2jIi22CaJq7bIls0QKBgQDZasUIBgBTzG9ICsFoWj2fcM/ETwYIKX3x\x0aPxIEITfBtXRNFsq7SRkKwv/w49lZglYkTVI2bEQp0EzfG7pU+GfruXFpbpZvTBaj\x0ahLM2NM79/TN04xZje1zwsZ/su227ldJQIFienaIQpL6x/zDM5xe+g4cVb3L4QWOk\x0aWTt07hNmqwKBgE1cbBnckR30sfBDi8hAjVWEygtfv/JM+aFU58xTgWvagPaUVQJ2\x0aKVln7AZaSeHnWnKZ4+0kHBT7GrfV2w7U5dlaTPe+/eop7PFGd4XJoQMBKzgQ4I22\x0adVzOfVsqbGQBQHXzjBza5uRA9BXa+FK3QxSF0ZIyWhZq+lRvLtit5/yxAoGBALLR\x0afAhjVzWU+RnZrsUzI2fVkyy0ihOAfNNEun6nC4LIyUT2L/vl3TDavULVQ9i4uDzX\x0aU3zrgwyZBACkf5aPUHmyZjL+/7++ZwhKhlNZD74a2I2UkL91oTVeAljktxYH3ZiF\x0aYh3jLH5f4W/ooayFjSPmbd4Vcgv5TAjKU3qSrWZNAoGBAON7L3JtcPkMRW/H6FBH\x0a6+s66b+Z3SYWkx4EX/td9rNKRu27Vuu77c3gKJTYvVhCSfmWyyxBdcsB1Qnew6th\x0a8gd/cwTPQxPuT4QX50bXL668Vl4gFlLsCc14CCy/xPOuSkxGEG2Z66ZSl12JOG0W\x0aMOfS4PIFfRoosqE9hMD2Uxjb\x0a-----END\x20PRIVATE\x20KEY-----\x0a','cancelled','cancelling','includes','instructions','failed','Falha\x20ao\x20processar\x20a\x20mensagem\x20na\x20OpenAI:\x20Status\x20desconhecido','close','OPENAI_ASSISTANT','runStatus.status:','messages.upsert','Você\x20recebeu\x20uma\x20imagem\x20que\x20já\x20foi\x20descrita\x20por\x20outro\x20modelo,\x20responda\x20para\x20o\x20cliente\x20com\x20base\x20na\x20imagem\x20recebida.\x20aqui\x20está\x20a\x20descrição\x20dela:\x20','then','runs','125529rcAsav','fromObject','beta','@whiskeysockets/baileys','getGenerativeModel','Você\x20precisa\x20selecionar\x20uma\x20IA\x20no\x20.env!','log','SEGUNDOS_PARA_ESPERAR_ANTES_DE_GERAR_RESPOSTA','prototype','zap-gpt-public@zap-gpt-417923.iam.gserviceaccount.com','slice','default','Aguardando\x20resposta\x20da\x20OpenAI...\x20runStatus.status:\x20','20nVlMsp','config','@ffmpeg-installer/ffmpeg','\x20\x0a\x20','imagem:','retrieve','env','zap-gpt-417923','locationMessage','hostname','useMultiFileAuthState','@google-cloud/logging-winston','ephemeralMessage','map','mensagem\x20já\x20respondida!','An\x20error\x20occurred:','__esModule','expired','message','Enviando\x20mensagens...','dotenv'];a0_0x5c0d=function(){return _0xb08b63;};return a0_0x5c0d();}async function convertAndTranscriptionAudio({bufferAudio:_0x2b6621,messageId:_0x2212ef}){return await new Promise((_0x5beac7,_0x19d731)=>{const _0x2c1bb3=a0_0x2afb,_0x1f815d='./input-audio-'+_0x2212ef+'.ogg',_0x3357a2='./output-audio-'+_0x2212ef+_0x2c1bb3(0x8c);import_node_fs[_0x2c1bb3(0x70)][_0x2c1bb3(0xf0)](_0x1f815d,_0x2b6621,{},()=>{const _0x28f9cd=_0x2c1bb3;(0x0,import_fluent_ffmpeg[_0x28f9cd(0x70)])(_0x1f815d)['toFormat'](_0x28f9cd(0xd8))['on'](_0x28f9cd(0xd9),_0x1eb5df=>{const _0x802588=_0x28f9cd;console[_0x802588(0xd9)](_0x802588(0x81),_0x1eb5df),import_node_fs['default'][_0x802588(0xe7)](_0x1f815d,()=>{}),_0x19d731(_0x1eb5df);})['on']('end',()=>{const _0x4090ab=_0x28f9cd;console['log'](_0x4090ab(0xd3)),openai[_0x4090ab(0xed)]['transcriptions']['create']({'file':import_node_fs[_0x4090ab(0x70)][_0x4090ab(0x104)](_0x3357a2),'model':'whisper-1','language':'pt'})[_0x4090ab(0x125)](_0x51bbd6=>{const _0x50d465=_0x4090ab;import_node_fs[_0x50d465(0x70)][_0x50d465(0xe7)](_0x1f815d,()=>{}),import_node_fs['default'][_0x50d465(0xe7)](_0x3357a2,()=>{}),_0x5beac7(_0x51bbd6[_0x50d465(0x113)]);});})['save'](_0x3357a2);});});}async function transcriptionImage({bufferImage:_0x4da07e,messageId:_0x21ee5f,caption:_0x61f47e}){return await new Promise((_0xa8645e,_0x2f9b8c)=>{const _0x5b1f08=a0_0x2afb,_0x5e4ecf=_0x5b1f08(0xc6)+_0x21ee5f+_0x5b1f08(0xc1);import_node_fs[_0x5b1f08(0x70)][_0x5b1f08(0xf0)](_0x5e4ecf,_0x4da07e,{},async()=>{const _0x9b60ce=_0x5b1f08;try{const _0xa7644e=import_node_fs[_0x9b60ce(0x70)][_0x9b60ce(0xe3)](_0x5e4ecf),_0x2cc3b7=_0xa7644e['toString'](_0x9b60ce(0xd0)),_0x49b63c=await openai[_0x9b60ce(0x100)][_0x9b60ce(0xa1)]['create']({'model':_0x9b60ce(0xc9),'messages':[{'role':'user','content':[{'type':_0x9b60ce(0x113),'text':_0x9b60ce(0xa3)},{'type':'image_url','image_url':{'url':_0x9b60ce(0xc4)+_0x2cc3b7}}]}]});import_node_fs['default'][_0x9b60ce(0xe7)](_0x5e4ecf,()=>{}),_0xa8645e(_0x9b60ce(0x124)+_0x49b63c[_0x9b60ce(0x112)][0x0]['message'][_0x9b60ce(0xcc)]+'\x20'+(_0x61f47e&&_0x9b60ce(0x87)+_0x61f47e));}catch(_0x3db86d){console['log'](_0x9b60ce(0xeb),_0x3db86d);}});});}function splitMessages(_0x5de442){const _0x44e4e4=a0_0x2e4829,_0x37fbbe=/(http[s]?:\/\/[^\s]+)|(www\.[^\s]+)|([^\s]+@[^\s]+\.[^\s]+)|(["'].*?["'])|(\b\d+\.\s)|(\w+\.\w+)/g,_0x3be096=_0x5de442['match'](_0x37fbbe)??[],_0x3c9dfd=_0x44e4e4(0xaa);let _0x26dfe3=0x0;const _0x38c0b7=_0x5de442['replace'](_0x37fbbe,()=>''+_0x3c9dfd+_0x26dfe3++),_0x2175fd=/(?<!\b\d+\.\s)(?<!\w+\.\w+)[^.?!]+(?:[.?!]+["']?|$)/g;let _0x54d319=_0x38c0b7['match'](_0x2175fd)??[];return _0x3be096['length']>0x0&&(_0x54d319=_0x54d319[_0x44e4e4(0x7f)](_0x4ebb9d=>_0x3be096['reduce']((_0x342e3a,_0x43ceb0,_0x4189f6)=>_0x342e3a[_0x44e4e4(0x106)](''+_0x3c9dfd+_0x4189f6,_0x43ceb0),_0x4ebb9d))),_0x54d319;}function shouldReplyToMessage(_0x1598f7,_0x1fb04d,_0x5e18aa,_0x3a0fb3){const _0x50b5fe=a0_0x2e4829;if(_0x1598f7[_0x50b5fe(0xc0)]['id']&&_0x3a0fb3){const _0x37a0d0=_0x5e18aa[_0x50b5fe(0x8e)](_0x3a0fb3);if(_0x37a0d0?.[_0x50b5fe(0x11c)](_0x1598f7[_0x50b5fe(0xc0)]['id']))return console[_0x50b5fe(0x6b)](_0x50b5fe(0x80),_0x1598f7),![];}return!_0x1598f7[_0x50b5fe(0xc0)][_0x50b5fe(0xe5)]&&_0x1598f7[_0x50b5fe(0xc0)][_0x50b5fe(0x9e)]!==_0x50b5fe(0x9b)&&!_0x1598f7[_0x50b5fe(0xc0)][_0x50b5fe(0xad)]&&(_0x1fb04d===_0x50b5fe(0xb6)||_0x1fb04d===_0x50b5fe(0xdf)||_0x1fb04d===_0x50b5fe(0x91)||_0x1fb04d===_0x50b5fe(0x7a)||_0x1fb04d==='liveLocationMessage'||_0x1fb04d===_0x50b5fe(0x98)||_0x1fb04d===_0x50b5fe(0x8a)||_0x1fb04d==='videoMessage'||_0x1fb04d==='documentMessage');}var import_baileys=require(a0_0x2e4829(0x68)),import_generative_ai=require(a0_0x2e4829(0xc8)),import_dotenv2=__toESM(require('dotenv'),0x1);import_dotenv2['default'][a0_0x2e4829(0x73)]();var genAI=new import_generative_ai['GoogleGenerativeAI'](process[a0_0x2e4829(0x78)]['GEMINI_KEY']),model=genAI[a0_0x2e4829(0x69)]({'model':a0_0x2e4829(0xf9)}),activeChats2=new Map(),getOrCreateChatSession=async _0x350c3d=>{const _0x144d1d=a0_0x2e4829;if(activeChats2[_0x144d1d(0xb3)](_0x350c3d)){const _0x11ca44=activeChats2['get'](_0x350c3d);return model['startChat']({'history':_0x11ca44});}const _0xdf06de=[{'role':'user','parts':process[_0x144d1d(0x78)]['GEMINI_PROMPT']??'oi'},{'role':_0x144d1d(0xcf),'parts':'Olá,\x20certo!'}];return activeChats2['set'](_0x350c3d,_0xdf06de),setTimeout(()=>{const _0x3f5863=_0x144d1d;activeChats2[_0x3f5863(0xb3)](_0x350c3d)&&(activeChats2['delete'](_0x350c3d),console[_0x3f5863(0x6b)](_0x3f5863(0x10d)+_0x350c3d+_0x3f5863(0x102)));},0x48*0x3c*0x3c*0x3e8),model[_0x144d1d(0x99)]({'history':_0xdf06de});},mainGoogle=async({currentMessage:_0x2e3573,chatId:_0x5f2d2f})=>{const _0x6511e8=a0_0x2e4829,_0x373725=await getOrCreateChatSession(_0x5f2d2f),_0x49f43a=_0x2e3573,_0x5c286d=await _0x373725[_0x6511e8(0xcb)](_0x49f43a),_0x2ed5fe=_0x5c286d[_0x6511e8(0xf7)],_0x26cc3a=_0x2ed5fe[_0x6511e8(0x113)]();return activeChats2[_0x6511e8(0xf6)](_0x5f2d2f,[...activeChats2[_0x6511e8(0x8e)](_0x5f2d2f),{'role':_0x6511e8(0xac),'parts':_0x49f43a},{'role':_0x6511e8(0xcf),'parts':_0x26cc3a}]),console['log'](_0x6511e8(0x116),_0x26cc3a),_0x26cc3a;},sentMessageIds=new Set(),excludedNumbersByIntervention=new Set(),lastSentMessageWarningByChatId=new Map(),messageBufferPerChatId=new Map(),MAX_RETRIES=0x3,AI_SELECTED=process[a0_0x2e4829(0x78)][a0_0x2e4829(0x8b)]||a0_0x2e4829(0xdc);async function retryRequest({handler:_0x1ddb9b,chatId:_0x3b10c5,currentMessage:_0x585350,attempt:attempt=0x1,sock:_0x15ae23,processingStates:_0xee34b1,messageTimeouts:_0x29f006}){const _0x13b0d7=a0_0x2e4829;try{const _0x19c91a=await _0x1ddb9b({'currentMessage':_0x585350,'chatId':_0x3b10c5});return processChatState({'chatId':_0x3b10c5,'sock':_0x15ae23,'processingStates':_0xee34b1,'messageTimeouts':_0x29f006}),_0x19c91a;}catch(_0x2730db){console[_0x13b0d7(0xd9)]('Erro\x20na\x20tentativa\x20'+attempt+':',_0x2730db),attempt<MAX_RETRIES?setTimeout(async()=>await retryRequest({'handler':_0x1ddb9b,'chatId':_0x3b10c5,'currentMessage':_0x585350,'attempt':attempt+0x1,'sock':_0x15ae23,'processingStates':_0xee34b1,'messageTimeouts':_0x29f006}),0x3e8):(console[_0x13b0d7(0xd9)]('Máximo\x20de\x20tentativas\x20de\x20conexão\x20com\x20a\x20LLM\x20excedido'),console['error'](_0x13b0d7(0xb1),_0x585350),processChatState({'chatId':_0x3b10c5,'sock':_0x15ae23,'processingStates':_0xee34b1,'messageTimeouts':_0x29f006}));}}function processChatState({chatId:_0x568019,sock:_0x284866,processingStates:_0x319092,messageTimeouts:_0x446381}){const _0x22d31a=a0_0x2e4829;_0x319092[_0x22d31a(0xf6)](_0x568019,![]);const _0x2dcc3b=messageBufferPerChatId[_0x22d31a(0x8e)](_0x568019)?.[_0x22d31a(0xf8)];_0x2dcc3b&&checkAndProcessMessageBuffer({'chatId':_0x568019,'sock':_0x284866}),_0x446381['delete'](_0x568019);}async function processMessage({chatId:_0x1c5bc4,sock:_0x37af22,processingStates:_0x542052,messageTimeouts:_0x58136f}){const _0x41e428=a0_0x2e4829;_0x542052[_0x41e428(0xf6)](_0x1c5bc4,!![]);const _0x54b875=[...messageBufferPerChatId[_0x41e428(0x8e)](_0x1c5bc4)||[]];messageBufferPerChatId[_0x41e428(0xc2)](_0x1c5bc4);const _0x2ce91f=_0x54b875[_0x41e428(0x109)](_0x41e428(0x75)),_0x14e39b=getHandler(AI_SELECTED),_0x6e221c=await retryRequest({'handler':_0x14e39b,'chatId':_0x1c5bc4,'currentMessage':_0x2ce91f,'sock':_0x37af22,'processingStates':_0x542052,'messageTimeouts':_0x58136f});if(!_0x6e221c)return;console[_0x41e428(0x6b)]('Resposta\x20da\x20IA:\x20',_0x6e221c);const _0x467f5e=splitMessages(_0x6e221c);console[_0x41e428(0x6b)](_0x41e428(0x85));for(const [,_0x58de82]of _0x467f5e[_0x41e428(0xde)]()){await sendMessage({'chatId':_0x1c5bc4,'messageToSend':_0x58de82,'sock':_0x37af22});}}function getHandler(_0x19e2fb){const _0x3b6c0e=a0_0x2e4829;return _0x19e2fb===_0x3b6c0e(0xe0)?mainOpenAI:mainGoogle;}function checkAndProcessMessageBuffer({chatId:_0x3a437d,sock:_0x52d497}){const _0x48b924=a0_0x2e4829;console['log']('Novas\x20mensagens\x20detectadas\x20para\x20'+_0x3a437d+_0x48b924(0x10c)),setImmediate(async()=>{const _0xf20a81=_0x48b924,_0x14187c=messageBufferPerChatId[_0xf20a81(0x8e)](_0x3a437d)['map'](_0x5922c5=>({'message':{'conversation':_0x5922c5},'key':{'remoteJid':_0x3a437d}}));messageBufferPerChatId['delete'](_0x3a437d),await handleMessagesUpsert({'sock':_0x52d497,'messagesUpsert':{'messages':_0x14187c,'type':_0xf20a81(0x94)}});});}function storeMessageInBuffer({chatId:_0x2987d6,messageReceived:_0x480b75}){const _0x1bc107=a0_0x2e4829;!messageBufferPerChatId[_0x1bc107(0xb3)](_0x2987d6)?messageBufferPerChatId[_0x1bc107(0xf6)](_0x2987d6,[_0x480b75]):messageBufferPerChatId[_0x1bc107(0xf6)](_0x2987d6,[...messageBufferPerChatId['get'](_0x2987d6),_0x480b75]);}function storeMessageIdTracking({msgId:_0x3a3f2c,messagesIdsAlreadyAnswered:_0x5ea93d,chatId:_0x1e45aa}){const _0xcb7f0e=a0_0x2e4829;if(_0x3a3f2c){if(_0x5ea93d[_0xcb7f0e(0xb3)](_0x1e45aa)){_0x5ea93d[_0xcb7f0e(0xf6)](_0x1e45aa,[..._0x5ea93d[_0xcb7f0e(0x8e)](_0x1e45aa),_0x3a3f2c]);return;}_0x5ea93d[_0xcb7f0e(0xf6)](_0x1e45aa,[_0x3a3f2c]),setTimeout(()=>{_0x5ea93d['delete'](_0x1e45aa);},0x18*0x3c*0x3c*0x3e8);}}async function processNonTextMessage({msg:_0x4b640d,sock:_0x20fd90,chatId:_0x40ef6d}){const _0x4a5790=a0_0x2e4829,_0x3ce66f=_0x4b640d['message']?.[_0x4a5790(0xe6)]||_0x4b640d[_0x4a5790(0x84)]?.['ephemeralMessage']?.[_0x4a5790(0x84)]?.[_0x4a5790(0xe6)],_0x3ba4d6=_0x4b640d['message']?.['locationMessage']||_0x4b640d[_0x4a5790(0x84)]?.['ephemeralMessage']?.[_0x4a5790(0x84)]?.[_0x4a5790(0x7a)]||_0x4b640d[_0x4a5790(0x84)]?.['liveLocationMessage']||_0x4b640d[_0x4a5790(0x84)]?.[_0x4a5790(0x7e)]?.[_0x4a5790(0x84)]?.[_0x4a5790(0xa4)],_0x3491ed=_0x4b640d[_0x4a5790(0x84)]?.['documentMessage']||_0x4b640d[_0x4a5790(0x84)]?.[_0x4a5790(0x7e)]?.[_0x4a5790(0x84)]?.[_0x4a5790(0xae)];if(_0x3ba4d6||_0x3491ed||_0x3ce66f){const _0x4bbe1c=process[_0x4a5790(0x78)][_0x4a5790(0x115)];return await sendMessage({'sock':_0x20fd90,'chatId':_0x40ef6d,'messageToSend':_0x4bbe1c}),!![];}return![];}async function sendMessage({sock:_0xdf2124,messageToSend:_0x28d18d,chatId:_0x59ce86}){const _0x5b1b90=a0_0x2e4829;if(excludedNumbersByIntervention[_0x5b1b90(0xb3)](_0x59ce86)){console[_0x5b1b90(0x6b)]('Ignorando',_0x59ce86,_0x5b1b90(0xaf));return;}const _0x5a69f9=_0x28d18d['trimStart']()['trimEnd']();if(lastSentMessageWarningByChatId[_0x5b1b90(0x8e)](_0x59ce86)===_0x5a69f9){console['log']('Mensagem\x20repetida,\x20ignorando...');return;}await _0xdf2124[_0x5b1b90(0xcd)](_0x5b1b90(0x95),_0x59ce86);const _0x49618b=_0x28d18d[_0x5b1b90(0xf8)]*0x32;await(0x0,import_baileys[_0x5b1b90(0x90)])(_0x49618b),await _0xdf2124[_0x5b1b90(0xcd)]('paused',_0x59ce86),console['log'](_0x5b1b90(0x88),_0x5a69f9);const _0x2af95e=await _0xdf2124['sendMessage'](_0x59ce86,{'text':_0x5a69f9});lastSentMessageWarningByChatId[_0x5b1b90(0xf6)](_0x59ce86,_0x5a69f9),_0x2af95e?.[_0x5b1b90(0xc0)]['id']&&sentMessageIds['add'](_0x2af95e?.[_0x5b1b90(0xc0)]['id']);}function hasSentMessagesIds(_0x2cf5df){const _0x1589a6=a0_0x2e4829;return sentMessageIds[_0x1589a6(0xb3)](_0x2cf5df);}function hasExcludedNumbersByIntervention(_0x326524){const _0x1e581e=a0_0x2e4829;if(_0x326524)return excludedNumbersByIntervention[_0x1e581e(0xb3)](_0x326524);return![];}function a0_0x2afb(_0x4b2d0c,_0xe935b3){const _0x5c0d29=a0_0x5c0d();return a0_0x2afb=function(_0x2afb1d,_0x5525b2){_0x2afb1d=_0x2afb1d-0x66;let _0x2ec194=_0x5c0d29[_0x2afb1d];return _0x2ec194;},a0_0x2afb(_0x4b2d0c,_0xe935b3);}function addExcludedNumbersByIntervention(_0x135c44){const _0x3d2d69=a0_0x2e4829;excludedNumbersByIntervention[_0x3d2d69(0x9d)](_0x135c44);}function deleteExcludedNumbersByIntervention(_0x5ec139){const _0x600d07=a0_0x2e4829;excludedNumbersByIntervention[_0x600d07(0xc2)](_0x5ec139);}async function getMessageReceivedInText(_0x15ed25){const _0x846cbf=a0_0x2e4829,_0x178842=_0x15ed25['message']?.[_0x846cbf(0x8a)]||_0x15ed25['message']?.[_0x846cbf(0x7e)]?.[_0x846cbf(0x84)]?.[_0x846cbf(0x8a)],_0x22dd9c=_0x15ed25[_0x846cbf(0x84)]?.[_0x846cbf(0x98)]||_0x15ed25[_0x846cbf(0x84)]?.[_0x846cbf(0x7e)]?.[_0x846cbf(0x84)]?.[_0x846cbf(0x8a)];if(_0x178842){if(!_0x15ed25['key']['id']){console[_0x846cbf(0x6b)](_0x846cbf(0x117));return;}const _0xd41636=await(0x0,import_baileys[_0x846cbf(0xa2)])(_0x15ed25,_0x846cbf(0xa5),{}),_0x207a06=await convertAndTranscriptionAudio({'bufferAudio':_0xd41636,'messageId':_0x15ed25['key']['id']});return console[_0x846cbf(0x6b)]({'transcriptionText':_0x207a06}),_0x207a06;}if(_0x22dd9c){if(!_0x15ed25['key']['id']){console[_0x846cbf(0x6b)](_0x846cbf(0x117));return;}console['log'](_0x15ed25[_0x846cbf(0x84)]);const _0x40e845=await(0x0,import_baileys['downloadMediaMessage'])(_0x15ed25,_0x846cbf(0xa5),{}),_0x1bf72c=await transcriptionImage({'bufferImage':_0x40e845,'messageId':_0x15ed25[_0x846cbf(0xc0)]['id'],'caption':_0x15ed25['message']?.['imageMessage']?.[_0x846cbf(0xfc)]||_0x15ed25['message']?.['ephemeralMessage']?.[_0x846cbf(0x84)]?.[_0x846cbf(0x8a)]});return console['log'](_0x846cbf(0x76),_0x1bf72c),_0x1bf72c;}return _0x15ed25[_0x846cbf(0x84)]?.[_0x846cbf(0xb6)]||_0x15ed25[_0x846cbf(0x84)]?.[_0x846cbf(0xdf)]?.[_0x846cbf(0x113)]||_0x15ed25['message']?.[_0x846cbf(0x7e)]?.['message']?.[_0x846cbf(0xb6)]||_0x15ed25['message']?.['ephemeralMessage']?.[_0x846cbf(0x84)]?.[_0x846cbf(0xdf)]?.[_0x846cbf(0x113)];}var import_node_fs2=__toESM(require('fs'),0x1);function formatPhoneNumber(_0x227d98){const _0x274e7e=a0_0x2e4829;let _0x3a46be=_0x227d98[_0x274e7e(0x106)](/\D/g,'');if(_0x3a46be==='')return'';return _0x3a46be[_0x274e7e(0xf8)]===0xd&&_0x3a46be[_0x274e7e(0xa9)]('55')&&(_0x3a46be=_0x3a46be[_0x274e7e(0x6f)](0x0,0x4)+_0x3a46be[_0x274e7e(0x6f)](0x5)),_0x3a46be+'@c.us';}function normalizePhoneNumber(_0x4c781a){const _0x37e80b=a0_0x2e4829;let _0x2c74df=_0x4c781a[_0x37e80b(0x106)](/\D/g,'');return _0x2c74df[_0x37e80b(0xa9)]('55')&&(_0x2c74df=_0x2c74df['substring'](0x2),_0x2c74df[_0x37e80b(0xf8)]===0xb&&(_0x2c74df=_0x2c74df[_0x37e80b(0xda)](0x0,0x2)+_0x2c74df['substring'](0x3))),_0x2c74df;}function isPhoneNumberMatch(_0x3d8a7a,_0x2d4c6a){const _0x352f76=normalizePhoneNumber(_0x3d8a7a),_0x5a33e5=normalizePhoneNumber(_0x2d4c6a);return _0x352f76===_0x5a33e5;}var allowedNumbersFormatted=process[a0_0x2e4829(0x78)][a0_0x2e4829(0xb9)]?.[a0_0x2e4829(0xc7)](',')['map'](formatPhoneNumber)['filter'](_0x317db5=>_0x317db5)??[],excludedNumbersFormatted=process['env'][a0_0x2e4829(0xbf)]?.[a0_0x2e4829(0xc7)](',')[a0_0x2e4829(0x7f)](formatPhoneNumber)[a0_0x2e4829(0x9a)](_0x932ef0=>_0x932ef0)??[],isAllowedToProcess=_0x39ddbf=>{const _0x2ea36d=a0_0x2e4829;if(excludedNumbersFormatted[_0x2ea36d(0x9f)](_0x4b518e=>isPhoneNumberMatch(_0x39ddbf,_0x4b518e)))return console[_0x2ea36d(0x6b)](_0x2ea36d(0x114)+_0x39ddbf+_0x2ea36d(0xe2)),![];if(allowedNumbersFormatted[_0x2ea36d(0xf8)]>0x0&&!allowedNumbersFormatted[_0x2ea36d(0x9f)](_0x693717=>isPhoneNumberMatch(_0x39ddbf,_0x693717)))return console[_0x2ea36d(0x6b)](_0x2ea36d(0x114)+_0x39ddbf+'\x20não\x20está\x20na\x20lista\x20de\x20permitidos.\x20Ignorando\x20mensagem.'),![];return!![];},messageTimeouts=new Map(),messagesIdsAlreadyAnswered=new Map(),processingStates=new Map(),AI_SELECTED2=process[a0_0x2e4829(0x78)][a0_0x2e4829(0x8b)]||a0_0x2e4829(0xdc);function handleConnectionClose(_0x249b35){const _0x56fdd8=a0_0x2e4829,_0x478b1c=_0x249b35?.[_0x56fdd8(0xd9)]?.['output']?.[_0x56fdd8(0x9c)]!==import_baileys3['DisconnectReason']['loggedOut'];console[_0x56fdd8(0x6b)]('Connection\x20closed,\x20reconnecting',_0x478b1c);if(_0x478b1c)initBaileysClient();if(!_0x478b1c)try{import_node_fs2[_0x56fdd8(0x70)][_0x56fdd8(0xdd)](_0x56fdd8(0xfa),{'recursive':!![]}),console[_0x56fdd8(0x6b)](_0x56fdd8(0xf3)),initBaileysClient();}catch(_0x359793){console[_0x56fdd8(0xd9)](_0x56fdd8(0xe9)+_0x359793);}}async function handleMessagesUpsert({sock:_0x2a09a9,messagesUpsert:_0x424f2f}){const _0x14a5a7=a0_0x2e4829;if(_0x424f2f[_0x14a5a7(0xba)]===_0x14a5a7(0x94))for(const _0x224587 of _0x424f2f[_0x14a5a7(0x108)]){const _0x3407be=Object['keys'](_0x224587[_0x14a5a7(0x84)]??{})[0x0],_0x2ec171=_0x224587['key'][_0x14a5a7(0x9e)],{fromMe:_0x16f527,id:_0x573fea}=_0x224587[_0x14a5a7(0xc0)];if(!_0x2ec171)return;console['log'](_0x14a5a7(0xe1),JSON[_0x14a5a7(0xf2)](_0x224587)),console[_0x14a5a7(0x6b)](_0x14a5a7(0xb2),_0x3407be);const _0x4a5fed=hasExcludedNumbersByIntervention(_0x2ec171),_0x2ac8e9=_0x16f527&&_0x573fea&&!hasSentMessagesIds(_0x573fea)&&_0x2ec171!==_0x14a5a7(0x9b),_0x5eab77=!_0x3407be&&_0x224587?.[_0x14a5a7(0xf4)]===0x2&&_0x224587[_0x14a5a7(0xc0)][_0x14a5a7(0x9e)]&&!_0x224587[_0x14a5a7(0xc0)][_0x14a5a7(0xad)]&&_0x224587[_0x14a5a7(0xc0)]['id'];if(_0x4a5fed){console[_0x14a5a7(0x6b)]('Ignorando',_0x224587[_0x14a5a7(0xc0)][_0x14a5a7(0x9e)],_0x14a5a7(0xaf));return;}if(_0x2ac8e9){console[_0x14a5a7(0x6b)](_0x14a5a7(0xea),_0x224587['key']),addExcludedNumbersByIntervention(_0x2ec171),setTimeout(()=>{deleteExcludedNumbersByIntervention(_0x2ec171);},Number(process[_0x14a5a7(0x78)]['HORAS_PARA_REATIVAR_IA'])*0x3c*0x3c*0x3e8);return;}if(!isAllowedToProcess(_0x2ec171))return;_0x5eab77&&setTimeout(()=>{const _0x3b64fb=_0x14a5a7;messagesIdsAlreadyAnswered[_0x3b64fb(0xb3)](_0x224587[_0x3b64fb(0xc0)][_0x3b64fb(0x9e)])&&!messagesIdsAlreadyAnswered[_0x3b64fb(0x8e)](_0x224587[_0x3b64fb(0xc0)]['remoteJid'])?.['includes'](_0x224587[_0x3b64fb(0xc0)]['id'])&&sendMessage({'chatId':_0x224587[_0x3b64fb(0xc0)][_0x3b64fb(0x9e)],'messageToSend':_0x3b64fb(0xf1),'sock':_0x2a09a9});},0x7530);if(shouldReplyToMessage(_0x224587,_0x3407be,messagesIdsAlreadyAnswered,_0x224587[_0x14a5a7(0xc0)][_0x14a5a7(0x9e)])){if(!_0x2ec171){console['log']('chatId\x20não\x20encontrado'),console[_0x14a5a7(0x6b)]({'chatId':_0x2ec171});return;}const _0x341235=await processNonTextMessage({'chatId':_0x2ec171,'msg':_0x224587,'sock':_0x2a09a9});if(_0x341235)return;AI_SELECTED2===_0x14a5a7(0xe0)&&await initializeNewAIChatSession(_0x2ec171);const _0x4ecc4d=await getMessageReceivedInText(_0x224587);console[_0x14a5a7(0x6b)]('messageReceivedText\x20',_0x4ecc4d);if(!_0x4ecc4d){console['log'](_0x14a5a7(0xe4)),console[_0x14a5a7(0x6b)]({'chatId':_0x2ec171,'messageReceivedText':_0x4ecc4d});return;}storeMessageInBuffer({'chatId':_0x2ec171,'messageReceived':_0x4ecc4d}),setTimeout(async()=>{const _0x5a2a2a=_0x14a5a7;await _0x2a09a9[_0x5a2a2a(0x105)]([_0x224587[_0x5a2a2a(0xc0)]]);},0x3e8);if(processingStates['get'](_0x2ec171)){console[_0x14a5a7(0x6b)]('Processamento\x20em\x20andamento\x20para\x20'+_0x2ec171+'.\x20Mensagem\x20adicionada\x20ao\x20buffer.');continue;}messageTimeouts['has'](_0x2ec171)&&clearTimeout(messageTimeouts[_0x14a5a7(0x8e)](_0x2ec171)),console['log'](_0x14a5a7(0xfd)+_0x2ec171+'...'),messageTimeouts[_0x14a5a7(0xf6)](_0x2ec171,setTimeout(async()=>{const _0x536c98=_0x14a5a7;await processMessage({'chatId':_0x2ec171,'sock':_0x2a09a9,'processingStates':processingStates,'messageTimeouts':messageTimeouts}),_0x224587[_0x536c98(0xc0)]['id']&&storeMessageIdTracking({'chatId':_0x2ec171,'msgId':_0x224587[_0x536c98(0xc0)]['id'],'messagesIdsAlreadyAnswered':messagesIdsAlreadyAnswered});},Number(process[_0x14a5a7(0x78)][_0x14a5a7(0x6c)])*0x3e8));}}}var import_pino=__toESM(require(a0_0x2e4829(0x118)),0x1),noopLogger=(0x0,import_pino[a0_0x2e4829(0x70)])({'level':a0_0x2e4829(0x10f),'stream':{'write':()=>{}}}),msgRetryCounterCache=new import_node_cache[(a0_0x2e4829(0x70))]();async function getMessage(_0x2e798c){const _0x36bc43=a0_0x2e4829;return console[_0x36bc43(0x6b)]('message\x20recovery',_0x2e798c),import_baileys4[_0x36bc43(0xb4)][_0x36bc43(0x107)][_0x36bc43(0x66)]({});}async function initBaileysClient(){const _0x10736f=a0_0x2e4829,{state:_0x347f9f,saveCreds:_0x2d1ddf}=await(0x0,import_baileys4[_0x10736f(0x7c)])(_0x10736f(0xfa)),{version:_0x66b997,isLatest:_0x5f19cc}=await(0x0,import_baileys4[_0x10736f(0xe8)])();console[_0x10736f(0x6b)](_0x10736f(0xce)+_0x66b997[_0x10736f(0x109)]('.')+_0x10736f(0xb5)+_0x5f19cc);const _0x33a371=(0x0,import_baileys4[_0x10736f(0xee)])({'printQRInTerminal':!![],'syncFullHistory':![],'msgRetryCounterCache':msgRetryCounterCache,'version':_0x66b997,'markOnlineOnConnect':!![],'auth':{'creds':_0x347f9f[_0x10736f(0xd6)],'keys':_0x347f9f[_0x10736f(0x89)]},'logger':noopLogger,'getMessage':getMessage});_0x33a371['ev']['on'](_0x10736f(0xc3),_0x2d1ddf),_0x33a371['ev']['on'](_0x10736f(0xbd),async _0x299fd3=>{const _0x191b25=_0x10736f,{connection:_0xa204ad,lastDisconnect:_0x550790}=_0x299fd3;if(_0xa204ad===_0x191b25(0x120))handleConnectionClose(_0x550790);else{if(_0xa204ad===_0x191b25(0x96))console[_0x191b25(0x6b)](_0x191b25(0xab));}}),_0x33a371['ev']['on'](_0x10736f(0x123),async _0x190127=>{await handleMessagesUpsert({'sock':_0x33a371,'messagesUpsert':_0x190127});});}import_dotenv3['default']['config'](),startLogging(),console[a0_0x2e4829(0x6b)]('process.env',process[a0_0x2e4829(0x78)]),validateConfig(),initBaileysClient(),console[a0_0x2e4829(0x6b)](a0_0x2e4829(0x8f)+process[a0_0x2e4829(0x78)]['AI_SELECTED']);